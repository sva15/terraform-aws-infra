# Environment Configuration
environment = "dev"  # Options: dev, int, prod

# Project Configuration
project_name = "IFRS-InsightGen"
lambda_prefix = "insightgen"

# Source Configuration
use_local_source = true  # Set to false to use S3 sources
create_s3_bucket = true  # Create S3 bucket for uploading local files

# S3 Configuration (when use_local_source = false)
lambda_code_s3_bucket = ""     # S3 bucket containing Lambda code
lambda_layers_s3_bucket = ""   # S3 bucket containing Lambda layers

# Local Paths (when use_local_source = true)
lambda_code_local_path = "./backend/python-aws-lambda-functions"
lambda_layers_local_path = "./backend/lambda-layers"

# S3 Bucket Name (optional - will be auto-generated if not provided)
s3_bucket_name = ""

# VPC Configuration
vpc_name = "default"
subnet_names = [
  "private-subnet-1",
  "private-subnet-2"
]
security_group_names = [
  "default"
]
public_subnet_names = [
  "public-subnet-1",
  "public-subnet-2"
]
# Lambda Configuration
lambda_runtime = "python3.12"
lambda_timeout = 300
lambda_memory_size = 512

# Lambda Layer Mappings (which layers each function should use)
lambda_layer_mappings = {
  "alb-lambda" = ["alb-layer"]
  "sns-lambda" = ["sns-layer"]
  # Add more mappings as needed
  # "function_name" = ["layer1", "layer2"]
}
sns_topic_names = [
  "sns-lambda-topic"
]

# SNS Subscriptions - Define which Lambda functions subscribe to which topics
lambda_sns_subscriptions = {
  "sns-lambda" = ["sns-lambda-topic"]
  # Add more subscriptions as needed
  # "function_name" = ["topic1", "topic2"]
}

enable_sns_encryption = true

# Additional Tags
additional_tags = {
  Owner       = "IFRS"
  CostCenter  = "Engineering"
  Application = "InsightGen"
}

# AWS Region
aws_region = "us-east-1"

# Frontend/UI Configuration
use_local_ui_source = true  # Set to false to use existing S3 bucket
ui_assets_local_path = "./ui/dist"  # Path to Angular build output
ui_s3_bucket = ""  # S3 bucket for UI assets (when use_local_ui_source = false)

# ECR Configuration
ecr_repositories = ["angular-ui", "nginx-alpine"]

# EC2 Configuration
instance_type = "t3.micro"
create_key_pair = true

# AMI Configuration (for shared custom AMIs)
ami_id = "ami-02d26659fd82cf299"  # Specific AMI ID (leave empty to use ami_name_pattern)
ami_owner = "099720109477"  # Replace with the account ID that shared the AMI
ami_name_pattern = "ubuntu-*"  # Pattern to search for Ubuntu-based AMIs

# Database Configuration (RDS PostgreSQL)
deploy_database = true
postgres_db_name = "ifrs_dev"
postgres_user = "ifrs_user"
postgres_port = 5432

# Password Management
use_secrets_manager = true  # Recommended: Use AWS Secrets Manager for password
postgres_password = ""      # Only required if use_secrets_manager = false

# Note: When use_secrets_manager = true, RDS will automatically generate and store
# the password in AWS Secrets Manager. This is the recommended approach for security.

# SQL Backup Configuration (choose one method)
# Option 1: S3 backup
sql_backup_s3_bucket = ""  # S3 bucket containing backup file
sql_backup_s3_key = ""     # S3 key for backup file (e.g., "backups/ifrs_backup.sql")

# Option 2: Local backup (recommended for development)
sql_backup_local_path = "database/pg_backup/ifrs_backup_20250928_144411.sql"  # Local path to SQL backup file
